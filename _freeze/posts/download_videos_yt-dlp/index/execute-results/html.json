{
  "hash": "eb84c5c393d61d70f9117fbe7fa22371",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"How To Download Difficult Videos Using yt-dlp\"\nauthor: \"Nick McMillan\"\ndate: \"2024-08-02\"\ncategories: [coding, data journalism, yt-dlp, web scraping ]\nimage: \"https://raw.githubusercontent.com/yt-dlp/yt-dlp/master/.github/banner.svg\"\n\n---\n\n## The problem\n\nThis past week one of my colleagues on the NPR investigations team needed to download a subcommittee hearing from the [U.S Senate Committee on the Judiciary](https://www.judiciary.senate.gov). \n\nWhen downloading videos from youtube I always use the command line tool [yt-dlp](https://github.com/yt-dlp/yt-dlp). Normally it is as simple typing the program's name and the url of the video you are trying to download:\n\n```{.bash filename=\"Terminal\"}\nyt-dlp https://www.youtube.com/watch?v=Tfe5kMbFGuE\n```\n\nHowever the U.S Senate Committee on the Judiciary website makes things a bit more difficult. If we put in the [url](https://www.judiciary.senate.gov/committee-activity/hearings/pregnancy-in-georgias-prisons) of the webpage that the video is located on we get the following error:\n\n![\"ERROR: Unable to extract url\"](photos/yt-dlp_error.png)\n\nLet's see how to grab the video off their website!\n\n## Download yt-dlp\n\nFirst make sure you download yt-dlp. Thier [github](https://github.com/yt-dlp/yt-dlp) has instructions for any computer that you are, whether thats windows, mac, or linux.\n\nSince I am on a mac I will use the [homebrew package manager](https://brew.sh):\n\n```{.bash filename = \"Terminal\"}\nbrew install yt-dlp\n```\n\n\n## Finding the correct url\n\nWhen websites play videos that they host on their own website, there will usually be a `.m3u8` file. A M3U8 file is simply a text file that contains the location of files that your browser will stream^[https://www.thetechedvocate.org/what-is-an-m3u8-file/]\n\nTo find the text file follow these steps:\n\n1. Open up your developer settings of your browser^[https://developer.mozilla.org/en-US/docs/Learn/Common_questions/Tools_and_setup/What_are_browser_developer_tools]\n2. Navigate to the `Network` tab\n3. Refresh the page\n4. Search for and then click the .m3u8 file\n5. Find the url that ends in .m3u8\n\n![\"Annotated Steps\"](photos/developer-steps.png)\n\nIn this case the url is:\n\n> https://www-senate-gov-media-srs.akamaized.net/hls/live/2036788/judiciary/judiciary102523p/master.m3u8\n\nRemember how I said that a .m3u8 file is just a set of instructions and locations regarding a video? If you were to put the url into your browser it would download the file which looks like this:\n\n::: {.callout-note}\n\n## .m3u8 file\n\n#EXTM3U\n#EXT-X-VERSION:3\n#EXT-X-INDEPENDENT-SEGMENTS\n#EXT-X-STREAM-INF:BANDWIDTH=712800,AVERAGE-BANDWIDTH=765600,CODECS=\"avc1.4d401f,mp4a.40.2\",RESOLUTION=1280x720,FRAME-RATE=30.000,SUBTITLES=\"subs\"\nmaster/index_1.m3u8\n#EXT-X-MEDIA:TYPE=SUBTITLES,NAME=\"English\",DEFAULT=YES,AUTOSELECT=YES,FORCED=NO,LANGUAGE=\"eng\",GROUP-ID=\"subs\",URI=\"master/text_1.m3u8\"\n\n\n\n:::\n\n## Download the video\n\nIf we give `yt-dlp` the .m3u8 url it will download the video!\n\n```{.bash filename = \"Terminal\"}\n\nyt-dlp https://www-senate-gov-media-srs.akamaized.net/hls/live/2036788/judiciary/judiciary102523p/master.m3u8\n\n```\n\nCongrats the video has downloaded! If you are unsure the location the video was downloaded, just type the following into the terminal:\n\n\n```{sql}\n\n```\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}